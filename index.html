<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.4/axios.min.js"
        integrity="sha512-6VJrgykcg/InSIutW2biLwA1Wyq+7bZmMivHw19fI+ycW0jIjsadm8wKQQLlfv3YUS4owfMDlZU38NtaAK6fSg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body class="bg-red-100/50 flex justify-center items-center gap-10 w-full h-lvh">
    <div class="bg-white rounded-md m-3 p-5 flex flex-col gap-4 shadow-sm">
        <div>
            <h6 class="text-lg text-gray-600">Name</h6>
            <h5 class="text-xl font-semibold">XDC Test Network</h5>
        </div>
        <div>
            <h6 class="text-lg text-gray-600">Account</h6>
            <div id="xdc_acc" class="flex gap-4 items-center justify-between my-2">
                <div class='flex space-x-2 justify-center items-center bg-white dark:invert'>
                    <span class='sr-only'>Loading...</span>
                     <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce [animation-delay:-0.3s]'></div>
                   <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce [animation-delay:-0.15s]'></div>
                   <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce'></div>
               </div>
            </div>
           
        </div>
        <div>
            <h6 class="text-lg text-gray-600">Balance</h6>
            <div id="xdc_bal" class="flex gap-4 items-center justify-between my-2">
                <div class='flex space-x-2 justify-center items-center bg-white dark:invert'>
                    <span class='sr-only'>Loading...</span>
                     <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce [animation-delay:-0.3s]'></div>
                   <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce [animation-delay:-0.15s]'></div>
                   <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce'></div>
               </div>
            </div>
        </div>
        <div>
            <label for="Amount"
                class="relative block rounded-md border border-gray-200 shadow-sm focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600">
                <input type="number" id="xdcAmount"
                    class="peer py-2 w-full px-2 border-none bg-transparent placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0"
                    placeholder="Amount" />
                <span
                    class="pointer-events-none absolute start-2.5 top-0 -translate-y-1/2 bg-white p-0.5 text-xs text-gray-700 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-0 peer-focus:text-xs">
                    Amount
                </span>
            </label>
        </div>
        <div class="flex gap-3">
            <button
                class="inline-block rounded border border-indigo-600 bg-indigo-600 px-12 py-3 text-md font-medium text-white hover:bg-transparent hover:text-indigo-600 focus:outline-none focus:ring active:text-indigo-500"
                href="#">
                Send to XDC Account
            </button>
            <button onclick="fromXDCToAztec()" class="inline-block rounded border border-indigo-600 px-12 py-3 text-md font-medium text-indigo-600 hover:bg-indigo-600 hover:text-white focus:outline-none focus:ring active:bg-indigo-500"
                href="#">
                Send to Aztec Account
            </button>
        </div>
    </div>
    <div>
        <img width="50" height="50" src="https://img.icons8.com/ios/50/data-in-both-directions.png" alt="data-in-both-directions"/>
    </div>
    <div class="bg-white rounded-md m-3 p-5 flex flex-col gap-4">
        <div>
            <h6 class="text-lg text-gray-600">Name</h6>
            <h5 class="text-xl font-semibold">Aztec Test Network</h5>
        </div>
        <div>
            <h6 class="text-lg text-gray-600">Account</h6>
            <div id="aztec_acc" class="flex gap-4 items-center justify-between my-2">
                <div class='flex space-x-2 justify-center items-center bg-white dark:invert'>
                    <span class='sr-only'>Loading...</span>
                     <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce [animation-delay:-0.3s]'></div>
                   <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce [animation-delay:-0.15s]'></div>
                   <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce'></div>
               </div>
            </div>
        </div>
        <div>
            <h6 class="text-lg text-gray-600">Balance</h6>
            <div id="aztec_bal" class="flex gap-4 items-center justify-between my-2">
                <div class='flex space-x-2 justify-center items-center bg-white dark:invert'>
                    <span class='sr-only'>Loading...</span>
                     <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce [animation-delay:-0.3s]'></div>
                   <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce [animation-delay:-0.15s]'></div>
                   <div class='h-5 w-5 bg-gray-600 rounded-full animate-bounce'></div>
               </div>
            </div>
        </div>
        <div>
            <label for="Amount"
                class="relative block rounded-md border border-gray-200 shadow-sm focus-within:border-blue-600 focus-within:ring-1 focus-within:ring-blue-600">
                <input type="number" id="Amount"
                    class="peer py-2 w-full px-2 border-none bg-transparent placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0"
                    placeholder="Amount" />
                <span
                    class="pointer-events-none absolute start-2.5 top-0 -translate-y-1/2 bg-white p-0.5 text-xs text-gray-700 transition-all peer-placeholder-shown:top-1/2 peer-placeholder-shown:text-sm peer-focus:top-0 peer-focus:text-xs">
                    Amount
                </span>
            </label>
        </div>
        <div class="flex gap-3">
            <button
                class="inline-block rounded border border-indigo-600 bg-indigo-600 px-12 py-3 text-md font-medium text-white hover:bg-transparent hover:text-indigo-600 focus:outline-none focus:ring active:text-indigo-500"
                href="#">
                Send to XDC Account
            </button>
            <button class="inline-block rounded border border-indigo-600 px-12 py-3 text-md font-medium text-indigo-600 hover:bg-indigo-600 hover:text-white focus:outline-none focus:ring active:bg-indigo-500"
                href="#">
                Send to Aztec Account
            </button>
        </div>
    </div>
</body>
<script>
    let azteAcc
    let xdcAcc
    (async () => {
        const account = await axios.get("http://localhost:3000/account-address")
        azteAcc = account.data.aztecAccountAddress.value
        xdcAcc = account.data.xdcAccountAddress
        xdc_acc.innerHTML =`<h5 class="text-xl font-semibold" >${xdcAcc}</h5> <button onclick="copy('${xdcAcc}')" class="pointer text-indigo-600 font-bold"> Copy </button>` 
        aztec_acc.innerHTML = `<p class="text-xl font-semibold" >${azteAcc.substring(0, 42)+"..."}</p> <button onclick="copy('${azteAcc}')" class="pointer text-indigo-600 font-bold"> Copy </button>` 
        const balance = await axios.get(`http://localhost:3000/balance/${xdcAcc}`)
        xdc_bal.innerHTML =`<h5 class="text-xl font-semibold" > ${balance.data.balance} FTH </h5>`
        aztec_bal.innerHTML =` <h5 class="text-xl font-semibold" > ${balance.data.aztecAccountBalance} WFTH </h5>`
    })()
    const copy = (text) => {
        console.log(text)
        navigator.clipboard.writeText(text)
    }
const fromXDCToAztec = async () => {
const tx = await axios.post("http://localhost:3000/bridge-send",{amount:xdcAmount.value , to:azteAcc})

}

</script>

</html>